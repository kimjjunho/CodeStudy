# AAC

- **AAC**(Android Architecture Components)는 테스트와 유지보수가 쉬운 앱을 디자인할 수 있도록 돕는 라이브러리의 모음이다.

![img](https://media.vlpt.us/images/hwi_chance/post/f8773023-1064-4259-b0e6-65eced0e2210/final-architecture.png)

### 앱 아키텍처 원리

**관심사 분리**

- 코드를 작성할 때 Activity 혹은 fragment와 같은 UI기반의 클래스는 UI 및 OS 상호작용을 처리하는 로직만 포함해야 한다.

- UI 클래스를 최대한 가볍게 유지하여 Lifecycle관련 문제를 피하기 위함이다.

  *Lifecycle : 수명 주기 인식 구성요소는 활동 및 프래그먼트와 같은 다른 구성요소의 수명 주기 상태 변경에 따라 작업을 실행한다. 이러한 구성요소를 사용하면 잘 구성된 경량의 코드를 만들어 유지 관리가 더 쉬워진다.

- UI클래스는 무언가를 소유하는 것이 아닌 OS와 앱 사이의 계약을 나타내도록 이어주는 클래스일 뿐이며, 따라서 OS는 메모리 부족과 같은 특정 상황이 발생하면 언제든지 UI클래스를 제거할 수 있다.

- 요약 : UI 클래스로부터, UI, OS 상호작용을 제외한 다른 로직을 분리하여 UI클래스에 대한 의존성을 최소화하는 것이 앱 관리 측면에서 좋다.

**모델에서 UI만들기**

- UI는 Model에서 만들어져야 한다.
- Model은 앱의 데이터 처리를 담당하는 컴포넌트로, 앱의 View객체 및 앱 컴포넌트와 독립되어 있으므로 앱의 Lifecycle에 영향을 받지 않는다
- 지속 Model은 OS에서 리소스 확볼르 위해 앱을 제거해도 사용자 데이터가 삭제되지 않고 네트워크에 문제가 있어도 앱이 곗고 장동하게 할 수 있게 때문이다.

### ViewModel

- 앱의 Lifecycle을 고려하여 UI관련 데이터를 저장하고 관리하는 컴포넌트이다
- UI Controller로부터 UI관련 데이터 저장 및 관리를 분리하여 ViewModel이 담당하도록 하면 해결 할 수 있는 부분
  1. 특정 작업이나 완전히 통제할 수 없는 기기 이벤트에 대한 응답으로 UI Controller를 제거하거나 다시 만들 수 있는데, 이런 경우 UI Controller에 저장된 모든 일시적인 UI 관련 데이터가 삭제된다.
  2. UI Controller에서 데이터를 위한 비동기 호출을 한다면 메모리 누수 가능성을 방지하기 위한 많은 유지 관리가 필요하며, 데이터를 복귀해야 하는 경우 비동기 호출을 다시해야 해서 리소스가 낭비된다.
  3. UI Controller에서 DB나 네트워크로부터 데이터를 로드하도록 하면 다른 클래스로 작업이 위임되지 않고 단일 클래스가 혼자서 앱의 모든 작업을 처리하려고 할 수 있다. 이 경우 테스트가 훨씬 더 어려워 진다.
- ViewModel객체는 뷰 또는 LifecycleOwners보다 오래 지속되도록 설계되었으며, ViewModel을 가져올 때 ViewModelProvider에 전달되는 LifecycleOwners에 따라 Lifecycle이 달라진다.
- 만약 액티비티가 전달되었다면 액티비티가 종료될 때까지, 프래그먼트가 전달되었다면 프래그먼트가 분리될 때까지 ViewModel은 메모리에 남아 있다.

### LiveData

- LiveData는 식별 가능한 데이터 홀더 클래스로 다른 앱 컴포넌트의 Lifecycle을 인식하며, 이를 통해 활성 상태에 있는 앱 컴포넌트 옵저버에게만 업데이트 정보를 알린다
- **LiveData 이점**
  - **UI와 데이터 상태의 일치 보장** : Observer Pattern을 따른다
  - **메모리 누수 없음** : Observer는 Lifecycle이 끝나면 자동으로 삭제된다
  - **중지된 활동으로 인한 비정상 종료 없음** : Observer가 비활성 상태에  있으면 어떤 LiveData이벤트도 받지 않는다
  - **최신 데이터 유지** : 컴포넌트가 비활성화되면 다시 활성화될 때 최신 데이터를 수신
  - **적절한 구성 변경** : 기기 회전과 같은 구성 변경으로 인해 액티비티나 프래그먼트가 다시 생성되면 최신 데이터를 즉시 받게 된다.
  - **리소스 공유** : 앱에서 시스템 서빗를 공유할 수 있도록 싱글톤 패턴을 사용하는 LiveData 객체를 확장하여 시스템 서비스를 래핑할 수 있다.

### +Room 라이브러리 사용





https://velog.io/@hwi_chance/Android-안드로이드-AAC